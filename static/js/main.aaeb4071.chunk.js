(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=(n(29),n(3)),o=n(4),u=n(6),l=n(5),d=n(15),j=n(7),b=n(2),h=n.n(b),p=n(9),O=n(14),f=n(0),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"Carregando..."})})}}]),n}(a.Component),v=m,g=n(17),x="user",k=function(t){return localStorage.setItem(x,JSON.stringify(t))},y=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},S=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(x));null===e&&(e={}),y(e)(t)}))},N=function(t){return new Promise((function(e){k(Object(g.a)(Object(g.a)({},{name:"",email:"",image:"",description:""}),t)),y("OK")(e)}))},w=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={userName:"",isLoginButtonDisabled:!0,isLoading:!1,dataReceveid:!1},t.onUserInputChange=function(e){var n,a=e.target,r=a.name,c=a.value;t.setState((n={},Object(O.a)(n,r,c),Object(O.a)(n,"isLoginButtonDisabled",c.length<3),n))},t.loginBtn=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),n=t.state.userName,e.next=4,N({name:n});case 4:e.sent&&t.setState({isLoading:!1,dataReceveid:!0});case 6:case"end":return e.stop()}}),e)}))),t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.userName,n=t.isLoginButtonDisabled,a=t.isLoading,r=t.dataReceveid;return Object(f.jsxs)("div",{"data-testid":"page-login",children:[a&&Object(f.jsx)(v,{}),r&&Object(f.jsx)(j.a,{to:"/search"}),Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{htmlFor:"userName",children:Object(f.jsx)("input",{type:"text",id:"userName",name:"userName",placeholder:"Digite o seu nome...","data-testid":"login-name-input",value:e,onChange:this.onUserInputChange})}),Object(f.jsx)("button",{type:"button","data-testid":"login-submit-button",disabled:n,onClick:this.loginBtn,children:"Entrar"})]})]})}}]),n}(a.Component),I=w,C=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={userLogged:"",isLoading:!0},t.getUserName=Object(p.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:n=e.sent,(a=n.name)&&t.setState({userLogged:a,isLoading:!1});case 5:case"end":return e.stop()}}),e)}))),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getUserName()}},{key:"render",value:function(){var t=this.state,e=t.userLogged,n=t.isLoading;return Object(f.jsxs)("header",{"data-testid":"header-component",children:[Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/search","data-testid":"link-to-search",children:"Search"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favorites"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/profile","data-testid":"link-to-profile",children:"Profile"})})]})}),n?Object(f.jsx)(v,{}):Object(f.jsx)("p",{"data-testid":"header-user-name",children:"Ol\xe1, ".concat(e,"!")})]})}}]),n}(a.Component),F=C,M=n(11),L=n.n(M),P=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.artistName,n=t.collectionId,a=t.collectionName,r=t.artworkUrl100;return Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/album/".concat(n),"data-testid":"link-to-album-".concat(n),children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:r,alt:e}),Object(f.jsx)("h3",{children:e}),Object(f.jsx)("h4",{children:a})]})})})}}]),n}(a.Component),D=P,U=(L.a.string,L.a.number,function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a,r,c,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,i=c.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),R=U,B=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={searchInput:"",artistName:"",artistAlbum:[],isSearchInputDisabled:!1,isSearchButtonDisabled:!0,hasReceveid:!1,albumNotFound:!1,isLoading:!1},t.onSearchInputChange=function(e){var n,a=e.target,r=a.name,c=a.value;t.setState((n={},Object(O.a)(n,r,c),Object(O.a)(n,"isSearchButtonDisabled",c.length<2),n))},t.searchBtn=Object(p.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.searchInput,e.next=3,R(n);case 3:(a=e.sent).length>0?t.setState({hasReceveid:!0,isLoading:!1,artistAlbum:a,artistName:n,searchInput:""}):t.setState({albumNotFound:!0});case 5:case"end":return e.stop()}}),e)}))),t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.artistName,n=t.searchInput,a=t.artistAlbum,r=t.isSearchInputDisabled,c=t.isSearchButtonDisabled,i=t.hasReceveid,s=t.albumNotFound,o=t.isLoading;return Object(f.jsxs)("div",{"data-testid":"page-search",children:[Object(f.jsx)(F,{}),Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{htmlFor:"searchInput",children:Object(f.jsx)("input",{type:"text",id:"searchInput",name:"searchInput",placeholder:"Pesquise por uma m\xfasica ou banda","data-testid":"search-artist-input",value:n,disabled:r,onChange:this.onSearchInputChange})}),Object(f.jsx)("button",{type:"button","data-testid":"search-artist-button",disabled:c,onClick:this.searchBtn,children:"Pesquisar"})]}),o&&Object(f.jsx)(v,{}),i&&Object(f.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(e)}),a.map((function(t){return Object(f.jsx)(D,Object(g.a)({},t),t.collectionId)})),s&&Object(f.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]})}}]),n}(a.Component),A=B,J=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.music,n=e.trackId,a=e.trackName,r=e.previewUrl,c=t.checked,i=t.onChange;return Object(f.jsxs)("div",{className:"musicPlayer",children:[Object(f.jsx)("h3",{children:a}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento audio."]}),Object(f.jsxs)("label",{htmlFor:n,children:["Favorita",Object(f.jsx)("input",{type:"checkbox",id:n,"data-testid":"checkbox-music-".concat(n),onChange:i,checked:c})]})]})}}]),n}(a.Component),E=J,K=(L.a.bool,L.a.func,L.a.number,L.a.string,function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T=K,q=n(24),_="favorite_songs";JSON.parse(localStorage.getItem(_))||localStorage.setItem(_,JSON.stringify([]));var z=function(){return JSON.parse(localStorage.getItem(_))},G=function(t){return localStorage.setItem(_,JSON.stringify(t))},H=function(t){return function(e){setTimeout((function(){e(t)}),500)}},Q=function(){return new Promise((function(t){var e=z();H(e)(t)}))},V=function(t){return new Promise((function(e){if(t){var n=z();G([].concat(Object(q.a)(n),[t]))}H("OK")(e)}))},W=function(t){return new Promise((function(e){var n=z();G(n.filter((function(e){return e.trackId!==t.trackId}))),H("OK")(e)}))},X=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={artistName:"",collectionName:"",imgUrl:"",listOfMusics:[],arrFavMusics:[],loading:!1},t.getFavMusics=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,Q();case 3:(n=e.sent)||t.setState({loading:!1}),n&&t.setState({loading:!1,arrFavMusics:n});case 6:case"end":return e.stop()}}),e)}))),t.getMusicsList=function(){var e=Object(p.a)(h.a.mark((function e(n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:a=e.sent,r=a.filter((function(t){return"song"===t.kind})),t.setState({artistName:a[0].artistName,collectionName:a[0].collectionName,imgUrl:a[0].artworkUrl100,listOfMusics:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.addOrRemoveFavSong=function(){var e=Object(p.a)(h.a.mark((function e(n){var a,r,c,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target,t.setState({loading:!0}),r=a.checked,c=a.id,i=t.state.listOfMusics,s=i.find((function(t){return t.trackId===Number(c)})),!r){e.next=10;break}return e.next=8,V(s);case 8:e.next=12;break;case 10:return e.next=12,W(s);case 12:t.setState({loading:!1},(function(){return t.getFavMusics()}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;this.getMusicsList(t),this.getFavMusics()}},{key:"render",value:function(){var t=this,e=this.state,n=e.artistName,a=e.collectionName,r=e.imgUrl,c=e.listOfMusics,i=e.arrFavMusics,s=e.loading;return Object(f.jsxs)("div",{"data-testid":"page-album",children:[Object(f.jsx)(F,{}),s?Object(f.jsx)(v,{}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{"data-testid":"artist-name",children:n}),Object(f.jsx)("h3",{"data-testid":"album-name",children:a}),Object(f.jsx)("img",{src:r,alt:n}),c.map((function(e){return Object(f.jsx)(E,{music:e,onChange:function(e){return t.addOrRemoveFavSong(e)},checked:i.some((function(t){return t.trackId===e.trackId}))},e.trackName)}))]})]})}}]),n}(a.Component),Y=X,Z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={arrFavMusics:[],loading:!1},t.getFavMusics=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,Q();case 3:(n=e.sent)||t.setState({loading:!1}),n&&t.setState({loading:!1,arrFavMusics:n});case 6:case"end":return e.stop()}}),e)}))),t.addOrRemoveFavSong=function(){var e=Object(p.a)(h.a.mark((function e(n){var a,r,c,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target,t.setState({loading:!0}),r=a.checked,c=a.id,i=t.state.arrFavMusics,s=i.find((function(t){return t.trackId===Number(c)})),!r){e.next=10;break}return e.next=8,V(s);case 8:e.next=12;break;case 10:return e.next=12,W(s);case 12:t.setState({loading:!1},(function(){return t.getFavMusics()}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getFavMusics()}},{key:"render",value:function(){var t=this,e=this.state,n=e.arrFavMusics,a=e.loading;return Object(f.jsxs)("div",{"data-testid":"page-favorites",children:[Object(f.jsx)(F,{}),Object(f.jsx)("p",{children:"Favorites Page"}),a?Object(f.jsx)(v,{}):Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsx)(E,{music:e,onChange:function(e){return t.addOrRemoveFavSong(e)},checked:n.some((function(t){return t.trackId===e.trackId}))},e.trackName)}))})]})}}]),n}(a.Component),$=Z,tt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{"data-testid":"page-profile",children:[Object(f.jsx)(F,{}),Object(f.jsx)("p",{children:"Profile Page"})]})}}]),n}(a.Component),et=tt,nt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(f.jsx)(F,{}),Object(f.jsx)("p",{children:"ProfileEdit Page"})]})}}]),n}(a.Component),at=nt,rt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found",children:Object(f.jsx)("p",{children:"NotFound Page"})})}}]),n}(a.Component),ct=rt,it=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)(d.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:I}),Object(f.jsx)(j.b,{path:"/search",component:A}),Object(f.jsx)(j.b,{path:"/album/:id",component:Y}),Object(f.jsx)(j.b,{path:"/favorites",component:$}),Object(f.jsx)(j.b,{path:"/profile/edit",component:at}),Object(f.jsx)(j.b,{exact:!0,path:"/profile",component:et}),Object(f.jsx)(j.b,{path:"*",component:ct})]})})}}]),n}(r.a.Component),st=it;i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(st,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.aaeb4071.chunk.js.map